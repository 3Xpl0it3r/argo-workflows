



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.1.1">
    
    
      
        <title>Configuring Your Artifact Repository - Argo Workflows - The workflow engine for Kubernetes</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.3020aac5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.01ccdecf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,400i,700|">
        <style>body,input{font-family:"Work Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-105170809-7", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#configuring-your-artifact-repository" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="Argo Workflows - The workflow engine for Kubernetes" class="md-header-nav__button md-logo">
          
            <img src="../assets/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Argo Workflows - The workflow engine for Kubernetes
            </span>
            <span class="md-header-nav__topic">
              Configuring Your Artifact Repository
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/argoproj/argo-workflows/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="Argo Workflows - The workflow engine for Kubernetes" class="md-nav__button md-logo">
      
        <img src="../assets/logo.png" width="48" height="48">
      
    </a>
    Argo Workflows - The workflow engine for Kubernetes
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/argoproj/argo-workflows/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../core-concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../quick-start/" title="Quick Start" class="md-nav__link">
      Quick Start
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../training/" title="Training" class="md-nav__link">
      Training
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      Beginner
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        Beginner
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-concepts/" title="Core Concepts" class="md-nav__link">
      Core Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/" title="CLI" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../variables/" title="Workflow Variables" class="md-nav__link">
      Workflow Variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Intermediate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Intermediate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../service-accounts/" title="Service Accounts" class="md-nav__link">
      Service Accounts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-rbac/" title="Workflow RBAC" class="md-nav__link">
      Workflow RBAC
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../node-field-selector/" title="Node Field Selectors" class="md-nav__link">
      Node Field Selectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../empty-dir/" title="Empty Dir" class="md-nav__link">
      Empty Dir
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-templates/" title="Workflow Templates" class="md-nav__link">
      Workflow Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-inputs/" title="Workflow Inputs" class="md-nav__link">
      Workflow Inputs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cluster-workflow-templates/" title="Cluster Workflow Templates" class="md-nav__link">
      Cluster Workflow Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cron-workflows/" title="Cron Workflows" class="md-nav__link">
      Cron Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cron-backfill/" title="Cron Backfill" class="md-nav__link">
      Cron Backfill
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../http-template/" title="HTTP Template" class="md-nav__link">
      HTTP Template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../container-set-template/" title="Container Set Template" class="md-nav__link">
      Container Set Template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../template-defaults/" title="Template Defaults" class="md-nav__link">
      Template Defaults
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../work-avoidance/" title="Work Avoidance" class="md-nav__link">
      Work Avoidance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../enhanced-depends-logic/" title="Enhanced Depends Logic" class="md-nav__link">
      Enhanced Depends Logic
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../data-sourcing-and-transformation/" title="Data Sourcing and Transformations" class="md-nav__link">
      Data Sourcing and Transformations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../artifact-repository-ref/" title="Artifact Repository Ref" class="md-nav__link">
      Artifact Repository Ref
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../key-only-artifacts/" title="Key-Only Artifacts" class="md-nav__link">
      Key-Only Artifacts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../conditional-artifacts-parameters/" title="Conditional Artifacts and Parameters" class="md-nav__link">
      Conditional Artifacts and Parameters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resource-duration/" title="Resource Duration" class="md-nav__link">
      Resource Duration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../estimated-duration/" title="Estimated Duration" class="md-nav__link">
      Estimated Duration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-pod-security-context/" title="Workflow Pod Security Context" class="md-nav__link">
      Workflow Pod Security Context
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../progress/" title="Workflow Progress" class="md-nav__link">
      Workflow Progress
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-creator/" title="Workflow Creator" class="md-nav__link">
      Workflow Creator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../synchronization/" title="Synchronization" class="md-nav__link">
      Synchronization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-of-workflows/" title="Workflow of Workflows" class="md-nav__link">
      Workflow of Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../memoization/" title="Step Level Memoization" class="md-nav__link">
      Step Level Memoization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tolerating-pod-deletion/" title="Tolerating Pod Deletion" class="md-nav__link">
      Tolerating Pod Deletion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../widgets/" title="Widgets" class="md-nav__link">
      Widgets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../retries/" title="Retries" class="md-nav__link">
      Retries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-restrictions/" title="Workflow Restrictions" class="md-nav__link">
      Workflow Restrictions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-notifications/" title="Workflow Notifications" class="md-nav__link">
      Workflow Notifications
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-events/" title="Workflow Events" class="md-nav__link">
      Workflow Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kubectl/" title="Kubectl" class="md-nav__link">
      Kubectl
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../access-token/" title="Access Token" class="md-nav__link">
      Access Token
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../swagger/" title="Argo Server API" class="md-nav__link">
      Argo Server API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rest-api/" title="REST API" class="md-nav__link">
      REST API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rest-examples/" title="API Examples" class="md-nav__link">
      API Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../client-libraries/" title="Client Libraries" class="md-nav__link">
      Client Libraries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../events/" title="Events" class="md-nav__link">
      Events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../webhooks/" title="Webhooks" class="md-nav__link">
      Webhooks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../submit-workflow-via-automation/" title="Submitting A Workflow Via Automation" class="md-nav__link">
      Submitting A Workflow Via Automation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-submitting-workflow/" title="One Workflow Submitting Another" class="md-nav__link">
      One Workflow Submitting Another
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resuming-workflow-via-automation/" title="Resume A Workflow" class="md-nav__link">
      Resume A Workflow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../async-pattern/" title="Asynchronous Job Pattern" class="md-nav__link">
      Asynchronous Job Pattern
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../security/" title="Security" class="md-nav__link">
      Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running-at-massive-scale/" title="Running At Massive Scale" class="md-nav__link">
      Running At Massive Scale
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      Plugins
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../executor_plugins/" title="Executor Plugins" class="md-nav__link">
      Executor Plugins
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../executor_swagger/" title="The API for an executor plugin." class="md-nav__link">
      The API for an executor plugin.
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ide-setup/" title="IDE Set-Up" class="md-nav__link">
      IDE Set-Up
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo-workflows/blob/master/examples/README.md" title="Examples" class="md-nav__link">
      Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../fields/" title="Field Reference" class="md-nav__link">
      Field Reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-8" type="checkbox" id="nav-5-8">
    
    <label class="md-nav__link" for="nav-5-8">
      CLI Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-8">
        CLI Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo/" title="argo" class="md-nav__link">
      argo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive/" title="argo archive" class="md-nav__link">
      argo archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_delete/" title="argo archive delete" class="md-nav__link">
      argo archive delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_get/" title="argo archive get" class="md-nav__link">
      argo archive get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_list/" title="argo archive list" class="md-nav__link">
      argo archive list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_list-label-keys/" title="argo archive list-label-keys" class="md-nav__link">
      argo archive list-label-keys
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_archive_list-label-values/" title="argo archive list-label-values" class="md-nav__link">
      argo archive list-label-values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_auth/" title="argo auth" class="md-nav__link">
      argo auth
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_auth_token/" title="argo auth token" class="md-nav__link">
      argo auth token
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template/" title="argo cluster-template" class="md-nav__link">
      argo cluster-template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_create/" title="argo cluster-template create" class="md-nav__link">
      argo cluster-template create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_delete/" title="argo cluster-template delete" class="md-nav__link">
      argo cluster-template delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_get/" title="argo cluster-template get" class="md-nav__link">
      argo cluster-template get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_lint/" title="argo cluster-template lint" class="md-nav__link">
      argo cluster-template lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cluster-template_list/" title="argo cluster-template list" class="md-nav__link">
      argo cluster-template list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_completion/" title="argo completion" class="md-nav__link">
      argo completion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron/" title="argo cron" class="md-nav__link">
      argo cron
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_create/" title="argo cron create" class="md-nav__link">
      argo cron create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_delete/" title="argo cron delete" class="md-nav__link">
      argo cron delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_get/" title="argo cron get" class="md-nav__link">
      argo cron get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_lint/" title="argo cron lint" class="md-nav__link">
      argo cron lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_list/" title="argo cron list" class="md-nav__link">
      argo cron list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_resume/" title="argo cron resume" class="md-nav__link">
      argo cron resume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_cron_suspend/" title="argo cron suspend" class="md-nav__link">
      argo cron suspend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_delete/" title="argo delete" class="md-nav__link">
      argo delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_executor-plugin/" title="argo executor-plugin" class="md-nav__link">
      argo executor-plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_executor-plugin_build/" title="argo executor-plugin build" class="md-nav__link">
      argo executor-plugin build
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_get/" title="argo get" class="md-nav__link">
      argo get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_lint/" title="argo lint" class="md-nav__link">
      argo lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_list/" title="argo list" class="md-nav__link">
      argo list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_logs/" title="argo logs" class="md-nav__link">
      argo logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_node/" title="argo node" class="md-nav__link">
      argo node
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_resubmit/" title="argo resubmit" class="md-nav__link">
      argo resubmit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_resume/" title="argo resume" class="md-nav__link">
      argo resume
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_retry/" title="argo retry" class="md-nav__link">
      argo retry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_server/" title="argo server" class="md-nav__link">
      argo server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_stop/" title="argo stop" class="md-nav__link">
      argo stop
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_submit/" title="argo submit" class="md-nav__link">
      argo submit
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_suspend/" title="argo suspend" class="md-nav__link">
      argo suspend
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template/" title="argo template" class="md-nav__link">
      argo template
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_create/" title="argo template create" class="md-nav__link">
      argo template create
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_delete/" title="argo template delete" class="md-nav__link">
      argo template delete
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_get/" title="argo template get" class="md-nav__link">
      argo template get
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_lint/" title="argo template lint" class="md-nav__link">
      argo template lint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_template_list/" title="argo template list" class="md-nav__link">
      argo template list
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_terminate/" title="argo terminate" class="md-nav__link">
      argo terminate
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_version/" title="argo version" class="md-nav__link">
      argo version
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_wait/" title="argo wait" class="md-nav__link">
      argo wait
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cli/argo_watch/" title="argo watch" class="md-nav__link">
      argo watch
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Operator Manual
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Operator Manual
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../upgrading/" title="Upgrading" class="md-nav__link">
      Upgrading
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releases/" title="Releases" class="md-nav__link">
      Releases
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-4" type="checkbox" id="nav-6-4" checked>
    
    <label class="md-nav__link" for="nav-6-4">
      Configuration
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-4">
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../managed-namespace/" title="Managed Namespace" class="md-nav__link">
      Managed Namespace
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Configuring Your Artifact Repository
      </label>
    
    <a href="./" title="Configuring Your Artifact Repository" class="md-nav__link md-nav__link--active">
      Configuring Your Artifact Repository
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-minio" title="Configuring Minio" class="md-nav__link">
    Configuring Minio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-aws-s3" title="Configuring AWS S3" class="md-nav__link">
    Configuring AWS S3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-gcs-google-cloud-storage" title="Configuring GCS (Google Cloud Storage)" class="md-nav__link">
    Configuring GCS (Google Cloud Storage)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#through-native-gcs-apis" title="Through Native GCS APIs" class="md-nav__link">
    Through Native GCS APIs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-s3-apis" title="Use S3 APIs" class="md-nav__link">
    Use S3 APIs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-alibaba-cloud-oss-object-storage-service" title="Configuring Alibaba Cloud OSS (Object Storage Service)" class="md-nav__link">
    Configuring Alibaba Cloud OSS (Object Storage Service)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-archive-logs/" title="Configuring Archive Logs" class="md-nav__link">
      Configuring Archive Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-controller-configmap/" title="Workflow Controller Configmap" class="md-nav__link">
      Workflow Controller Configmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-executors/" title="Workflow Executors" class="md-nav__link">
      Workflow Executors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sidecar-injection/" title="Sidecar Injection" class="md-nav__link">
      Sidecar Injection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../default-workflow-specs/" title="Default Workflow Spec" class="md-nav__link">
      Default Workflow Spec
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../offloading-large-workflows/" title="Offloading Large Workflows" class="md-nav__link">
      Offloading Large Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../workflow-archive/" title="Workflow Archive" class="md-nav__link">
      Workflow Archive
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../metrics/" title="Prometheus Metrics" class="md-nav__link">
      Prometheus Metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../links/" title="Links" class="md-nav__link">
      Links
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-5" type="checkbox" id="nav-6-5">
    
    <label class="md-nav__link" for="nav-6-5">
      Argo Server
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-6-5">
        Argo Server
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server/" title="Argo Server" class="md-nav__link">
      Argo Server
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server-auth-mode/" title="Argo Server Auth Mode" class="md-nav__link">
      Argo Server Auth Mode
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tls/" title="Transport Layer Security" class="md-nav__link">
      Transport Layer Security
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server-sso/" title="Argo Server SSO" class="md-nav__link">
      Argo Server SSO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../argo-server-sso-argocd/" title="Use ArgoCD Dex for authentication" class="md-nav__link">
      Use ArgoCD Dex for authentication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../high-availability/" title="High-Availability (HA)" class="md-nav__link">
      High-Availability (HA)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../disaster-recovery/" title="Disaster Recovery (DR)" class="md-nav__link">
      Disaster Recovery (DR)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../scaling/" title="Scaling" class="md-nav__link">
      Scaling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../cost-optimisation/" title="Cost Optimisation" class="md-nav__link">
      Cost Optimisation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../windows/" title="Windows Container Support" class="md-nav__link">
      Windows Container Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../environment-variables/" title="Environment Variables" class="md-nav__link">
      Environment Variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Developer Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Developer Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../CONTRIBUTING/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mentoring/" title="Mentoring" class="md-nav__link">
      Mentoring
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running-locally/" title="Running Locally" class="md-nav__link">
      Running Locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../versioning/" title="Versioning" class="md-nav__link">
      Versioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../public-api/" title="Public API" class="md-nav__link">
      Public API
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../static-code-analysis/" title="Static Code Analysis" class="md-nav__link">
      Static Code Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../stress-testing/" title="Stress Testing" class="md-nav__link">
      Stress Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../releasing/" title="Release Instructions" class="md-nav__link">
      Release Instructions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../faq/" title="FAQ" class="md-nav__link">
      FAQ
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://github.com/argoproj/argo-workflows/releases" title="Releases ⧉" class="md-nav__link">
      Releases ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://blog.argoproj.io/" title="Blog ⧉" class="md-nav__link">
      Blog ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://argoproj.github.io/community/join-slack" title="Slack ⧉" class="md-nav__link">
      Slack ⧉
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://twitter.com/argoproj" title="Twitter ⧉" class="md-nav__link">
      Twitter ⧉
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuring-minio" title="Configuring Minio" class="md-nav__link">
    Configuring Minio
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-aws-s3" title="Configuring AWS S3" class="md-nav__link">
    Configuring AWS S3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-gcs-google-cloud-storage" title="Configuring GCS (Google Cloud Storage)" class="md-nav__link">
    Configuring GCS (Google Cloud Storage)
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#through-native-gcs-apis" title="Through Native GCS APIs" class="md-nav__link">
    Through Native GCS APIs
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use-s3-apis" title="Use S3 APIs" class="md-nav__link">
    Use S3 APIs
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-alibaba-cloud-oss-object-storage-service" title="Configuring Alibaba Cloud OSS (Object Storage Service)" class="md-nav__link">
    Configuring Alibaba Cloud OSS (Object Storage Service)
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/argoproj/argo-workflows/edit/master/docs/configure-artifact-repository.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="configuring-your-artifact-repository">Configuring Your Artifact Repository<a class="headerlink" href="#configuring-your-artifact-repository" title="Permanent link">&para;</a></h1>
<p>To run Argo workflows that use artifacts, you must configure and use an artifact
repository. Argo supports any S3 compatible artifact repository such as AWS, GCS
and Minio. This section shows how to configure the artifact repository.
Subsequent sections will show how to use it.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Inputs</th>
<th>Outputs</th>
<th>Usage (Feb 2020)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Artifactory</td>
<td>Yes</td>
<td>Yes</td>
<td>11%</td>
</tr>
<tr>
<td>GCS</td>
<td>Yes</td>
<td>Yes</td>
<td>-</td>
</tr>
<tr>
<td>Git</td>
<td>Yes</td>
<td>No</td>
<td>-</td>
</tr>
<tr>
<td>HDFS</td>
<td>Yes</td>
<td>Yes</td>
<td>3%</td>
</tr>
<tr>
<td>HTTP</td>
<td>Yes</td>
<td>No</td>
<td>2%</td>
</tr>
<tr>
<td>OSS</td>
<td>Yes</td>
<td>Yes</td>
<td>-</td>
</tr>
<tr>
<td>Raw</td>
<td>Yes</td>
<td>No</td>
<td>5%</td>
</tr>
<tr>
<td>S3</td>
<td>Yes</td>
<td>Yes</td>
<td>86%</td>
</tr>
</tbody>
</table>
<p>The actual repository used by a workflow is choosen by the following rules:</p>
<ol>
<li>Anything explicitly configured using <a href="../artifact-repository-ref/">Artifact Repository Ref</a>. This is the most flexible, safe, and secure option.</li>
<li>From a config map named <code>artifact-repositories</code> if it has the <code>workflows.argoproj.io/default-artifact-repository</code> annotation in the workflow's namespace.                                        </li>
<li>From a workflow controller configmap.</li>
</ol>
<h2 id="configuring-minio">Configuring Minio<a class="headerlink" href="#configuring-minio" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>$ brew install helm # mac, helm 3.x
$ helm repo add minio https://helm.min.io/ # official minio Helm charts
$ helm repo update
$ helm install argo-artifacts minio/minio --set service.type=LoadBalancer --set fullnameOverride=argo-artifacts
</code></pre></div>
<p>Login to the Minio UI using a web browser (port 9000) after obtaining the
external IP using <code>kubectl</code>.</p>
<div class="highlight"><pre><span></span><code>$ kubectl get service argo-artifacts
</code></pre></div>
<p>On Minikube:</p>
<div class="highlight"><pre><span></span><code>$ minikube service --url argo-artifacts
</code></pre></div>
<p>NOTE: When minio is installed via Helm, it generates
credentials, which you will use to login to the UI:
Use the commands shown below to see the credentials</p>
<ul>
<li>AccessKey: kubectl get secret argo-artifacts -o jsonpath='{.data.accesskey}' | base64 --decode</li>
<li>SecretKey: kubectl get secret argo-artifacts -o jsonpath='{.data.secretkey}' | base64 --decode</li>
</ul>
<p>Create a bucket named <code>my-bucket</code> from the Minio UI.</p>
<h2 id="configuring-aws-s3">Configuring AWS S3<a class="headerlink" href="#configuring-aws-s3" title="Permanent link">&para;</a></h2>
<p>Create your bucket and access keys for the bucket. AWS access keys have the same
permissions as the user they are associated with. In particular, you cannot
create access keys with reduced scope. If you want to limit the permissions for
an access key, you will need to create a user with just the permissions you want
to associate with the access key. Otherwise, you can just create an access key
using your existing user account.</p>
<div class="highlight"><pre><span></span><code>$ export mybucket=bucket249
$ cat &gt; policy.json &lt;&lt;EOF
{
   &quot;Version&quot;:&quot;2012-10-17&quot;,
   &quot;Statement&quot;:[
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:[
            &quot;s3:PutObject&quot;,
            &quot;s3:GetObject&quot;
         ],
         &quot;Resource&quot;:&quot;arn:aws:s3:::$mybucket/*&quot;
      }
   ]
}
EOF
$ aws s3 mb s3://$mybucket [--region xxx]
$ aws iam create-user --user-name $mybucket-user
$ aws iam put-user-policy --user-name $mybucket-user --policy-name $mybucket-policy --policy-document file://policy.json
$ aws iam create-access-key --user-name $mybucket-user &gt; access-key.json
</code></pre></div>
<p>NOTE: if you want argo to figure out which region your buckets belong in, you
must additionally set the following statement policy. Otherwise, you must
specify a bucket region in your workflow configuration.</p>
<div class="highlight"><pre><span></span><code>    ...
      {
         &quot;Effect&quot;:&quot;Allow&quot;,
         &quot;Action&quot;:[
            &quot;s3:GetBucketLocation&quot;
         ],
         &quot;Resource&quot;:&quot;arn:aws:s3:::*&quot;
      }
    ...
</code></pre></div>
<h2 id="configuring-gcs-google-cloud-storage">Configuring GCS (Google Cloud Storage)<a class="headerlink" href="#configuring-gcs-google-cloud-storage" title="Permanent link">&para;</a></h2>
<p>Create a bucket from the GCP Console
(https://console.cloud.google.com/storage/browser).</p>
<p>There are 2 ways to configure a Google Cloud Storage.</p>
<h3 id="through-native-gcs-apis">Through Native GCS APIs<a class="headerlink" href="#through-native-gcs-apis" title="Permanent link">&para;</a></h3>
<ul>
<li>Create and download a Google Cloud service account key.</li>
<li>Create a kubernetes secret to store the key.</li>
<li>Configure <code>gcs</code> artifact as following in the yaml.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">artifacts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">message</span><span class="w"></span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/message</span><span class="w"></span>
<span class="w">    </span><span class="nt">gcs</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-bucket-name</span><span class="w"></span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path/in/bucket</span><span class="w"></span>
<span class="w">      </span><span class="c1"># serviceAccountKeySecret is a secret selector.</span><span class="w"></span>
<span class="w">      </span><span class="c1"># It references the k8s secret named &#39;my-gcs-credentials&#39;.</span><span class="w"></span>
<span class="w">      </span><span class="c1"># This secret is expected to have have the key &#39;serviceAccountKey&#39;,</span><span class="w"></span>
<span class="w">      </span><span class="c1"># containing the base64 encoded credentials</span><span class="w"></span>
<span class="w">      </span><span class="c1"># to the bucket.</span><span class="w"></span>
<span class="w">      </span><span class="c1">#</span><span class="w"></span>
<span class="w">      </span><span class="c1"># If it&#39;s running on GKE and Workload Identity is used,</span><span class="w"></span>
<span class="w">      </span><span class="c1"># serviceAccountKeySecret is not needed.</span><span class="w"></span>
<span class="w">      </span><span class="nt">serviceAccountKeySecret</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gcs-credentials</span><span class="w"></span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">serviceAccountKey</span><span class="w"></span>
</code></pre></div>
<p>If it's a GKE cluster, and Workload Identity is configured, there's no need to
create the Service Account key and store it as a K8s secret,
<code>serviceAccountKeySecret</code> is also not needed in this case. Please follow the
link to configure Workload Identity
(https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity).</p>
<h3 id="use-s3-apis">Use S3 APIs<a class="headerlink" href="#use-s3-apis" title="Permanent link">&para;</a></h3>
<p>Enable S3 compatible access and create an access key. Note that S3 compatible
access is on a per project rather than per bucket basis.</p>
<ul>
<li>Navigate to Storage &gt; Settings
  (https://console.cloud.google.com/storage/settings).</li>
<li>Enable interoperability access if needed.</li>
<li>Create a new key if needed.</li>
<li>Configure <code>s3</code> artifact as following example.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">artifacts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-output-artifact</span><span class="w"></span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/my-output-artifact</span><span class="w"></span>
<span class="w">    </span><span class="nt">s3</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">storage.googleapis.com</span><span class="w"></span>
<span class="w">      </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gcs-bucket-name</span><span class="w"></span>
<span class="w">      </span><span class="c1"># NOTE that, by default, all output artifacts are automatically tarred and</span><span class="w"></span>
<span class="w">      </span><span class="c1"># gzipped before saving. So as a best practice, .tgz or .tar.gz</span><span class="w"></span>
<span class="w">      </span><span class="c1"># should be incorporated into the key name so the resulting file</span><span class="w"></span>
<span class="w">      </span><span class="c1"># has an accurate file extension.</span><span class="w"></span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">path/in/bucket/my-output-artifact.tgz</span><span class="w"></span>
<span class="w">      </span><span class="nt">accessKeySecret</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gcs-s3-credentials</span><span class="w"></span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">accessKey</span><span class="w"></span>
<span class="w">      </span><span class="nt">secretKeySecret</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gcs-s3-credentials</span><span class="w"></span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secretKey</span><span class="w"></span>
</code></pre></div>
<h2 id="configuring-alibaba-cloud-oss-object-storage-service">Configuring Alibaba Cloud OSS (Object Storage Service)<a class="headerlink" href="#configuring-alibaba-cloud-oss-object-storage-service" title="Permanent link">&para;</a></h2>
<p>To configure artifact storage for Alibaba Cloud OSS, please first follow
the <a href="https://www.alibabacloud.com/product/oss">official documentation</a> to set up
an OSS account and bucket.</p>
<p>Once it's set up, you can find endpoint and bucket
information on your OSS dashboard and then use them like the following to
configure the artifact storage for your workflow:</p>
<div class="highlight"><pre><span></span><code><span class="nt">artifacts</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-art</span><span class="w"></span>
<span class="w">    </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/my-artifact</span><span class="w"></span>
<span class="w">    </span><span class="nt">oss</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://oss-cn-hangzhou-zmf.aliyuncs.com</span><span class="w"></span>
<span class="w">      </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-bucket-name</span><span class="w"></span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test/mydirectory/</span><span class="w"> </span><span class="c1"># this is path in the bucket</span><span class="w"></span>
<span class="w">      </span><span class="c1"># accessKeySecret and secretKeySecret are secret selectors.</span><span class="w"></span>
<span class="w">      </span><span class="c1"># It references the k8s secret named &#39;my-oss-credentials&#39;.</span><span class="w"></span>
<span class="w">      </span><span class="c1"># This secret is expected to have have the keys &#39;accessKey&#39;</span><span class="w"></span>
<span class="w">      </span><span class="c1"># and &#39;secretKey&#39;, containing the base64 encoded credentials</span><span class="w"></span>
<span class="w">      </span><span class="c1"># to the bucket.</span><span class="w"></span>
<span class="w">      </span><span class="nt">accessKeySecret</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-oss-credentials</span><span class="w"></span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">accessKey</span><span class="w"></span>
<span class="w">      </span><span class="nt">secretKeySecret</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-oss-credentials</span><span class="w"></span>
<span class="w">        </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secretKey</span><span class="w"></span>
</code></pre></div>
<p>You can also set <code>createBucketIfNotPresent</code> to <code>true</code> to tell the artifact driver to automatically create the OSS bucket if it doesn't exist yet when saving artifacts. Note that you'll need to set additional permission for your OSS account to create new buckets.</p>
<h1 id="configure-the-default-artifact-repository">Configure the Default Artifact Repository<a class="headerlink" href="#configure-the-default-artifact-repository" title="Permanent link">&para;</a></h1>
<p>In order for Argo to use your artifact repository, you can configure it as the
default repository. Edit the workflow-controller config map with the correct
endpoint and access/secret keys for your repository.</p>
<h2 id="s3-compatible-artifact-repository-bucket-such-as-aws-gcs-minio-and-alibaba-cloud-oss">S3 compatible artifact repository bucket (such as AWS, GCS, Minio, and Alibaba Cloud OSS)<a class="headerlink" href="#s3-compatible-artifact-repository-bucket-such-as-aws-gcs-minio-and-alibaba-cloud-oss" title="Permanent link">&para;</a></h2>
<p>Use the <code>endpoint</code> corresponding to your provider:</p>
<ul>
<li>AWS: s3.amazonaws.com</li>
<li>GCS: storage.googleapis.com</li>
<li>Minio: my-minio-endpoint.default:9000</li>
<li>Alibaba Cloud OSS: oss-cn-hangzhou-zmf.aliyuncs.com</li>
</ul>
<p>The <code>key</code> is name of the object in the <code>bucket</code> The <code>accessKeySecret</code> and
<code>secretKeySecret</code> are secret selectors that reference the specified kubernetes
secret. The secret is expected to have the keys 'accessKey' and 'secretKey',
containing the base64 encoded credentials to the bucket.</p>
<p>For AWS, the <code>accessKeySecret</code> and <code>secretKeySecret</code> correspond to
<code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code> respectively.</p>
<p>EC2 provides a metadata API via which applications using the AWS SDK may assume
IAM roles associated with the instance. If you are running argo on EC2 and the
instance role allows access to your S3 bucket, you can configure the workflow
step pods to assume the role. To do so, simply omit the <code>accessKeySecret</code> and
<code>secretKeySecret</code> fields.</p>
<p>For GCS, the <code>accessKeySecret</code> and <code>secretKeySecret</code> for S3 compatible access
can be obtained from the GCP Console. Note that S3 compatible access is on a per
project rather than per bucket basis.</p>
<ul>
<li>Navigate to Storage &gt; Settings
  (https://console.cloud.google.com/storage/settings).</li>
<li>Enable interoperability access if needed.</li>
<li>Create a new key if needed.</li>
</ul>
<p>For Minio, the <code>accessKeySecret</code> and <code>secretKeySecret</code> naturally correspond the
AccessKey and SecretKey.</p>
<p>For Alibaba Cloud OSS, the <code>accessKeySecret</code> and <code>secretKeySecret</code> corresponds to
<code>accessKeyID</code> <code>and accessKeySecret</code> respectively.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>$ kubectl edit configmap workflow-controller-configmap -n argo      # assumes argo was installed in the argo namespace
...
data:
  artifactRepository: |
    s3:
      bucket: my-bucket
      keyFormat: prefix/in/bucket     #optional
      endpoint: my-minio-endpoint.default:9000        #AWS =&gt; s3.amazonaws.com; GCS =&gt; storage.googleapis.com
      insecure: true                  #omit for S3/GCS. Needed when minio runs without TLS
      accessKeySecret:                #omit if accessing via AWS IAM
        name: my-minio-cred
        key: accessKey
      secretKeySecret:                #omit if accessing via AWS IAM
        name: my-minio-cred
        key: secretKey
      useSDKCreds: true               #tells argo to use AWS SDK&#39;s default provider chain, enable for things like IRSA support
</code></pre></div>
<p>The secrets are retrieved from the namespace you use to run your workflows. Note
that you can specify a <code>keyFormat</code>.</p>
<h2 id="google-cloud-storage-gcs">Google Cloud Storage (GCS)<a class="headerlink" href="#google-cloud-storage-gcs" title="Permanent link">&para;</a></h2>
<p>Argo also can use native GCS APIs to access a Google Cloud Storage bucket.</p>
<p><code>serviceAccountKeySecret</code> references to a k8 secret which stores a Google Cloud
service account key to access the bucket.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>$ kubectl edit configmap workflow-controller-configmap -n argo  # assumes argo was installed in the argo namespace
...
data:
  artifactRepository: |
    gcs:
      bucket: my-bucket
      keyFormat: prefix/in/bucket     #optional, it could reference workflow variables, such as &quot;{{workflow.name}}/{{pod.name}}&quot;
      serviceAccountKeySecret:
        name: my-gcs-credentials
        key: serviceAccountKey
</code></pre></div>
<h1 id="accessing-non-default-artifact-repositories">Accessing Non-Default Artifact Repositories<a class="headerlink" href="#accessing-non-default-artifact-repositories" title="Permanent link">&para;</a></h1>
<p>This section shows how to access artifacts from non-default artifact
repositories.</p>
<p>The <code>endpoint</code>, <code>accessKeySecret</code> and <code>secretKeySecret</code> are the same as for
configuring the default artifact repository described previously.</p>
<div class="highlight"><pre><span></span><code>  templates:
  - name: artifact-example
    inputs:
      artifacts:
      - name: my-input-artifact
        path: /my-input-artifact
        s3:
          endpoint: s3.amazonaws.com
          bucket: my-aws-bucket-name
          key: path/in/bucket/my-input-artifact.tgz
          accessKeySecret:
            name: my-aws-s3-credentials
            key: accessKey
          secretKeySecret:
            name: my-aws-s3-credentials
            key: secretKey
    outputs:
      artifacts:
      - name: my-output-artifact
        path: /my-output-artifact
        s3:
          endpoint: storage.googleapis.com
          bucket: my-gcs-bucket-name
          # NOTE that, by default, all output artifacts are automatically tarred and
          # gzipped before saving. So as a best practice, .tgz or .tar.gz
          # should be incorporated into the key name so the resulting file
          # has an accurate file extension.
          key: path/in/bucket/my-output-artifact.tgz
          accessKeySecret:
            name: my-gcs-s3-credentials
            key: accessKey
          secretKeySecret:
            name: my-gcs-s3-credentials
            key: secretKey
          region: my-GCS-storage-bucket-region
    container:
      image: debian:latest
      command: [sh, -c]
      args: [&quot;cp -r /my-input-artifact /my-output-artifact&quot;]
</code></pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../managed-namespace/" title="Managed Namespace" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Managed Namespace
              </span>
            </div>
          </a>
        
        
          <a href="../configure-archive-logs/" title="Configuring Archive Logs" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Configuring Archive Logs
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.dc02f8ce.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>